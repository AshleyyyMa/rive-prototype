<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rive Hover Prototype</title>
    <style>
      /* Optional: make canvas responsive */
      #rive-canvas { width: 400px; height: 400px; display: block; }
    </style>
  </head>
  <body>
    <canvas id="rive-canvas" width="400" height="400"></canvas>

    <!-- Rive Web (Canvas) -->
    <script src="https://unpkg.com/@rive-app/canvas"></script>
    <script>
      // Replace with your hosted .riv file URL
      const RIV_SRC = "ace_test1.riv"; // e.g., yourfile.riv
      const STATE_MACHINE_NAME = "State Machine 1"; // match the state machine name in your file

      const canvasEl = document.getElementById("rive-canvas");

      const riveInstance = new rive.Rive({
        src: RIV_SRC,
        canvas: canvasEl,
        autoplay: true,
        stateMachines: STATE_MACHINE_NAME,
        // autoBind optional. If your file uses Data Binding defaults, set true.
        autoBind: true,
        onLoad: () => {
          // Ensure crisp rendering on high-DPI displays
          riveInstance.resizeDrawingSurfaceToCanvas();

          // Grab inputs for the named state machine
          const inputs = riveInstance.stateMachineInputs(STATE_MACHINE_NAME);

          // Expect a boolean input named "hover"
          const hoverInput = inputs.find((i) => i.name === "isHover");

          // Basic hover handling
          canvasEl.addEventListener("mouseenter", () => {
            if (hoverInput && hoverInput.type === "bool") hoverInput.value = true;
          });

          canvasEl.addEventListener("mouseleave", () => {
            if (hoverInput && hoverInput.type === "bool") hoverInput.value = false;
          });

          // Optional: drive position with the cursor (if your SM has number inputs)
          const xInput = inputs.find((i) => i.name === "cursorX");
          const yInput = inputs.find((i) => i.name === "cursorY");

          canvasEl.addEventListener("mousemove", (e) => {
            const rect = canvasEl.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            if (xInput && xInput.type === "number") xInput.value = x;
            if (yInput && yInput.type === "number") yInput.value = y;
          });

          // Keep animation crisp on window resize
          window.addEventListener("resize", () => {
            riveInstance.resizeDrawingSurfaceToCanvas();
          });
        },
      });
    </script>
  </body>
</html>
